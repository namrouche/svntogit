<div xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:nxl="http://nuxeo.org/nxforms/layout"
  xmlns:nxh="http://nuxeo.org/nxweb/html">

<h:form id="esup_document_version">

  <h:panelGrid columns="2" styleClass="dataInput" rendered="#{renderVersioningOptionsForCurrentDocument}"
    columnClasses="labelColumn, fieldColumn">

    <h:outputLabel for="versioningOptionInstanceId" value="#{messages['label.versioning.selectVersioningOption']}" />

    <h:panelGroup class="dataInputGroup">
      <h:selectOneRadio id="versioningOptionInstanceId"
        value="#{esupDocumentVersioning.versioningOptionInstanceId}"
        required="true" layout="pageDirection"
        validator="#{documentVersioning.validateOptionSelection}"
        requiredMessage="#{messages['error.versioning.none_selected']}" >
        <f:selectItems
          value="#{esupDocumentVersioning.availableVersioningOptionsMap}" />
      </h:selectOneRadio>
      <h:message for="versioningOptionInstanceId" styleClass="errorMessage" />
    </h:panelGroup>

    <h:outputText value="" />
    <h:outputText value="" />

    <h:selectBooleanCheckbox id="createSnapshot" 
      label="#{messages['label.versioning.createSnapshot']}" 
      value="#{documentVersioning.createSnapshot}"
      rendered="#{documentVersioning.displayCreateSnapshotOption}">
    </h:selectBooleanCheckbox>
    <h:outputLabel for="createSnapshot" 
      rendered="#{documentVersioning.displayCreateSnapshotOption}">#{messages['label.versioning.createSnapshot']}</h:outputLabel>
    <br/>  
  </h:panelGrid>
  
  <p class="buttonsGadget">
    <h:commandButton type="submit" value="#{messages['command.save']}"
      styleClass="button"
      action="#{documentVersioning.updateDocument}" />
  </p>

</h:form>

   <h:panelGroup rendered="#{currentDocument.versionable}">
	<h3><h:outputText
		value="#{messages['label.versioning.currentVersion']}"/></h3>
	<h:panelGrid columns="2" styleClass="dataInput"
		columnClasses="labelColumn, fieldColumn">
		<h:outputText value="#{messages['label.versioning.currentVersion']}"
			rendered="#{documentVersioning.uidInfoAvailable}" />
		<h:panelGroup>
			<nxh:outputText
				value="#{documentVersioning.getVersionLabel(currentDocument)}" />
		</h:panelGroup>
	</h:panelGrid>


	<h3><h:outputText value="#{messages['title.version']}" /></h3>

    <h:form rendered="${not empty versionList}">
    <h:dataTable var="versionItem" value="#{versionList}"
      class="dataOutput" rowClasses="dataRowEven,dataRowOdd">
      <h:column>
        <f:facet name="header">
          <h:outputText value="#{messages['label.version']}" />
        </f:facet>
        <h:outputText value="#{versionItem.description}" />
      </h:column>

      <h:column>
        <f:facet name="header">
          <h:outputText value="#{messages['label.action']}" />
        </f:facet>

      <ui:insert name="document_history_buttons" />

      </h:column>
    </h:dataTable>
    </h:form>

    <p><h:outputText rendered="${empty versionList}"
      value="#{messages['label.noversion']}"/></p>
   </h:panelGroup>


</div>
