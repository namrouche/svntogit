<component name="org.esup.ecm.actions">

	<extension target="org.nuxeo.ecm.platform.actions.ActionService"
		point="actions">

		<!-- nuxeo-platform: overwrite actions-contrib.xml -->
		
		<action id="user_manager" link="#{userManagerActions.viewUsers}" enabled="@showUserManager@"
			label="command.manageMembers" order="20">
			<category>USER_SERVICES</category>
			<filter-id>only_for_manager</filter-id>
			<filter id="user_manager">
				<rule grant="true">
					<condition>#{userServicesContext.userManagerEnabled}
					</condition>
				</rule>
			</filter>
		</action>
		
		<action id="user_dashboard" link="user_dashboard" enabled="@showUserDashBoard@"
	      label="command.user_dashboard" order="10">
	      <category>USER_SERVICES</category>
	      <filter id="user_dashboard_enabled">
	        <rule grant="true">
	          <condition>#{userServicesContext.dashboardEnabled}</condition>
	        </rule>
	      </filter>
	    </action>
		
	   	<action id="vocabularies_manager" link="#{vocabularyActions.viewAllVocabularies}" enabled="@showVocabulariesManager@" label="title.vocabularies"
      	order="30">
      		<category>USER_SERVICES</category>
      		<filter-id>only_for_manager</filter-id>
   	 	</action>

	    <action id="SHOW_PERSONAL_WORKSPACE"
	      link="#{userWorkspaceManagerActions.navigateToCurrentUserPersonalWorkspace}"
	      enabled="@showPersonnalWorkspace@" label="command.user.personal.workspace" icon="/icons/show_personal_workspace.gif"
	      order="11">
	      <category>USER_SERVICES</category>
	      <filter-id>not_anonymous</filter-id>
	      <filter-id>isNotInsidePersonalWorkspace</filter-id>           	      
	    </action>

	    <action id="SHOW_REPOSITORY"
	      link="#{userWorkspaceManagerActions.navigateToOverallWorkspace}"
	      enabled="@showRepository@" label="command.user.return.to.repository" icon="/icons/go_to_repository.gif"
	      order="10">
	      <category>USER_SERVICES</category>	 	      
	      <filter-id>not_anonymous</filter-id>	
	      <filter-id>isNotInsidePersonalWorkspace</filter-id>           
	    </action>

	    <action id="themes_manager" link="#{themeEditorAction.startEditor}" enabled="@showThemesManager@" 
	      label="command.manageThemes" order="40">
	      <category>USER_SERVICES</category>
	      <filter-id>only_for_manager</filter-id>
	    </action>

		<action id="TAB_VIEW" link="/incl/tabs/esup_document_view.xhtml" />

		<action id="TAB_EDIT" link="/incl/tabs/esup_document_edit.xhtml" />

		<action id="TAB_METADATA_VIEW" enabled="false" />
		
		<action id="TAB_METADATA_EDIT" enabled="false" />
		
		<action id="TAB_PREVIEW" enabled="false" />

		<action id="TAB_FILES_VIEW" enabled="false" />

		<action id="TAB_FILES_EDIT" enabled="false" />

		<action id="TAB_PUBLISH" label="esup.action.publish.content"
			link="/incl/tabs/esup_document_publish.xhtml">
			<filter-id>edit</filter-id>			
		</action>

		<action id="TAB_RELATIONS" enabled="false" />

		<action id="TAB_CONTENT_JBPM" enabled="false" />

		<action id="TAB_MY_SUBSCRIPTIONS" enabled="false" />

		<action id="TAB_MANAGE_SUBSCRIPTIONS" enabled="false" />

		<action id="TAB_CONTENT_ARCHIVE" enabled="false" />

		<action id="view_comments" enabled="false" />

		<action id="DOCUMENT_LOCK" enabled="false" />

		<action id="TAB_ESUP_VERSIONS" link="/incl/tabs/esup_document_version.xhtml"
			enabled="true" label="esup.action.versions.content" icon="/icons/file.gif"
			order="52">
			<category>VIEW_ACTION_LIST</category>
			<filter-id>publish_document</filter-id>
			<filter-id>mutable_document</filter-id>
		</action>

		<action id="TAB_CONTENT_HISTORY" link="/incl/tabs/esup_document_history.xhtml" />

		<action id="DOCUMENT_UNPUBLISH" link="#{esupPublishActions.unPublishProxy}"
			enabled="true" label="command.document.unpublish" icon="">
			<category>PUBLISHED_DOCUMENT</category>
			<!-- filter-id>can_unpublish</filter-id-->
			<filter-id>lock_published_document</filter-id>
		</action>
		
    	<action id="TAB_CONTENT_HISTORY" enabled="false" />


		<action id="TAB_MANAGE" link="/incl/tabs/document_manage.xhtml"
			enabled="true" order="240" label="action.view.manage"
			icon="/icons/file.gif">
			<category>VIEW_ACTION_LIST</category>
			<filter-id>manage</filter-id>
			<filter id="folder">
	        	<rule grant="true">
	          		<facet>Folderish</facet>
	        	</rule>
	      	</filter>
		</action>

	</extension>
	
	  <extension target="org.nuxeo.ecm.platform.actions.ActionService"
	    point="filters">
	    <filter id="isNotInsidePersonalWorkspace">
	      <rule grant="false">
	        <condition>#{isInsidePersonalWorkspace}</condition>
	      </rule>
	    </filter>
	  </extension>

</component>
